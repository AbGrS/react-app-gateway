(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{23:function(e,t,n){e.exports={row:"login_row__2KzBg",button:"login_button__1mFk-",loginButton:"login_loginButton__2_ulT login_button__1mFk-"}},25:function(e,t,n){e.exports={top:"dashboard_top__FN0dB",column:"dashboard_column__t1DRn"}},42:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),s=(n(42),n(35)),i=n(26),u=n(9),l=n(3),d=n(14),j=n.n(d),b=n(22),p=n(11),h=n(19),O=n.n(h);function f(e){return"https://sheltered-mountain-74311.herokuapp.com/".concat(e)}function m(e){var t=e.email,n=e.password;return O.a.post(f("http://35.207.169.147/auth"),{email:t,password:n})}function x(e){return O.a.defaults.headers.common={Authorization:"Bearer ".concat(e)},O.a.get(f("http://35.207.169.147/results"))}var v=Object(p.b)("user/login",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,c=n.rejectWithValue,e.prev=2,e.next=5,m({email:r,password:a});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",c(e.t0));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(p.b)("user/fetchResults",function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,x(t);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),k=n(23),w=n.n(k),_=n(1);function y(){var e=Object(u.c)((function(e){return e})).user,t=Object(u.b)(),n=Object(r.useState)(""),a=Object(i.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(""),d=Object(i.a)(s,2),j=d[0],b=d[1];return!e.tokenReceived&&!localStorage.getItem("token")||e.tokenExpired?Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:w.a.row,children:[Object(_.jsx)("input",{type:"text",placeholder:"email",onChange:function(e){o(e.target.value)}}),Object(_.jsx)("input",{type:"text",placeholder:"password",onChange:function(e){b(e.target.value)}}),Object(_.jsx)("button",{className:w.a.loginButton,onClick:function(){t(v({email:c,password:j}))},children:"Login"}),e.error&&"Some Error occurred. Please try again"]})}):Object(_.jsx)(l.a,{to:"/dashboard"})}var S=n(25),B=n.n(S),E=0;function I(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).user,n=t.results,a=t.tokenExpired,c=localStorage.getItem("token"),o=n.filter((function(e){return"finish"===e.event}));o=o.sort((function(e,t){return e.time-t.time}));return Object(r.useEffect)((function(){return clearInterval(E),e(g(c)),E=setInterval((function(){e(g(c))}),3e4),function(){return clearInterval(E)}}),[]),a||!c?Object(_.jsx)(l.a,{to:"login"}):n.length?Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:B.a.top,children:[Object(_.jsx)("h1",{children:"This is Dashboard"}),Object(_.jsxs)("div",{className:B.a.column,children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:"No."}),Object(_.jsx)("span",{children:"Horse"}),Object(_.jsx)("span",{children:"Time"}),Object(_.jsx)("span",{children:"Event"})]}),o.map((function(e){return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:e.horse.id}),Object(_.jsx)("span",{children:e.horse.name}),Object(_.jsx)("span",{children:"".concat(e.time/1e3,"s")}),Object(_.jsx)("span",{children:e.event})]},e.horse.id+e.time)})),!o.length&&"The race has just begin!"]})]})}):"Fetching Results..."}var N=n(37),R=(n(68),localStorage.getItem("token"));var C=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(N.a,{children:Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:"/",exact:!0,render:function(e){return Object(_.jsx)(l.a,{to:{pathname:R?"/dashboard":"/login",state:{from:e.location}}})}}),Object(_.jsx)(l.b,{exact:!0,path:"/login",component:y}),Object(_.jsx)(l.b,{path:"/dashboard",exact:!0,render:function(e){return R?Object(_.jsx)(I,Object(s.a)({},e)):Object(_.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F,L=n(10),T=Object(p.c)({name:"user",initialState:{isLoading:!0,results:[]},reducers:{},extraReducers:(F={},Object(L.a)(F,v.pending,(function(e){e.isLoading=!0})),Object(L.a)(F,v.fulfilled,(function(e,t){localStorage.setItem("token",t.payload.data.token),e.tokenReceived=t.payload.data.token,e.results=[],e.tokenExpired=!1})),Object(L.a)(F,v.rejected,(function(e,t){e.isLoading=!1,e.error=!0})),Object(L.a)(F,g.fulfilled,(function(e,t){e.results.push(t.payload.data),e.error=!1})),Object(L.a)(F,g.rejected,(function(e,t){"Access denied"===t.payload.response.data.error&&(e.tokenExpired=!0)})),F)}),W=Object(p.a)({reducer:{user:T.reducer},middleware:function(e){return e({serializableCheck:!1})}});o.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(u.a,{store:W,children:Object(_.jsx)(C,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[69,1,2]]]);
//# sourceMappingURL=main.5fca9b0f.chunk.js.map